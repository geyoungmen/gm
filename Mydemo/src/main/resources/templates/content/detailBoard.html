<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<form id="detailBoard">
[[${detailboard}]]
<div>Title</div>
<div th:text="${detailboard.brdSub}"></div>
<div>Content</div>
<div th:text="${detailboard.brdContent}"></div>

<img th:src="@{'images:' + ${detailboard.fileOriName}}" alt="이미지" />
<!-- <img th:src="@{/image/{filename}(filename=${detailboard.fileName})}" alt="이미지" /> -->

<input type="hidden" th:value="${detailboard.brdSub}" id="brdSub">
<input type="hidden" th:value="${detailboard.brdContent}" id="brdContent">
<input type="hidden" th:value="${detailboard.brdNo}" id="brdNo">

<!-- <button type="button" id="update-btn" onClick="location.href='/writeBoard'" >수정</button> -->
<button type="button" id="update-btn" th:onclick="updateBoard([[${detailboard.brdNo}]])" >수정</button>
<button type="button" id="delete-btn">삭제</button>
<button type="button" onClick="location.href='/board'" >목록으로</button>

</form>

<script type="text/javascript">
$(document).ready(function() {
    $("#delete-btn").click(function() {
        
        var dataToSend = {
            brdSub: $("#brdSub").val(),
            brdContent: $("#brdContent").val(),
            brdNo: $("#brdNo").val()
        };

        $.ajax({
            type: "POST",
            url: "/deleteBoard",
            contentType: "application/json", // 요청 데이터의 타입을 JSON으로 설정
            data: JSON.stringify(dataToSend), // 데이터를 JSON 문자열로 변환
            success: function(data) {
                alert("삭제 완료 ");
                window.location.href = "/board";
            },
            error: function() {
                alert("삭제 실패");
            }
        });
    });
});

function updateBoard(brdNo) {
	//var brdNo = $("#brdNo").val();
		
	location.href = '/updateBoard?No='+ brdNo;
	  
}

</script>

</body>
</html>