<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<h1>글 작성</h1>
<form id="writeBoard" enctype="multipart/form-data" action="/writeBoard" method="post">
<!-- <form id="writeBoard"> -->

<div>제목</div>
<div>
<input name="brdSub" id="sub" type="text">
</div>

<div>내용</div>
<div>
<textarea name="brdContent" id="content"></textarea>
</div>
<DIV>
<input type="file" name="file" id="file" multiple/>
</DIV>
<!-- <button type="button" id="write-btn">글 작성하기</button> -->
<button type="submit" id="write-btn" onClick="location.href='/board'">글 작성하기</button>
<button type="button" onClick="location.href='/board'" >목록으로</button>

</form>
<script type="text/javascript">

$(document).ready(function() {
    $("#write-btn").click(function() {
    	var data = { 
                brdSub: $("#sub").val(),
                brdContent: $("#content").val(),
            };
    	$.ajax({
            type: "POST",
            url: "/writeBoard",
            contentType: "application/json", // 요청 데이터의 타입을 JSON으로 설정
            data: JSON.stringify(dataToSend), // 데이터를 JSON 문자열로 변환
            success: function(data) {
            	if (data == 1) {
            		alert("글 작성 성공");
                	window.location.href = "./board";
            	} else if (data == 0){
            		alert("작성 실패");
            	},
            		error: function() {
                         alert("작성 실패");
                     }
	    });
});

</script>
</body>
</html>